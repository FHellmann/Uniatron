apply plugin: 'com.novoda.static-analysis'

staticAnalysis {
    penalty failOnWarnings
    checkstyle {
        toolVersion '8.8'
        exclude project.fileTree('src/test/java')
        exclude project.fileTree('src/androidTest/java')
        configFile rootProject.file('tools/checkstyle.xml')
        includeVariants { variant -> variant.name.contains('debug') }
    }
    pmd {
        toolVersion '6.3.0'
        exclude project.fileTree('src/test/java')
        exclude project.fileTree('src/androidTest/java')
        ruleSetFiles = rootProject.files('tools/pmd.xml')
        includeVariants { variant -> variant.name.contains('debug') }
    }
    findbugs {
        toolVersion '3.0.1'
        exclude project.fileTree('src/test/java')
        exclude project.fileTree('src/androidTest/java')
        excludeFilter rootProject.file('tools/findbugs.xml')
        includeVariants { variant -> variant.name.contains('debug') }
    }
    lintOptions {
        abortOnError false
        disable 'GradleDependency', 'PluralsCandidate', 'UnusedResources', 'ObsoleteLintCustomCheck'
    }
}

afterEvaluate {
    assembleDebug.dependsOn 'check'
}